<!DOCTYPE html>
{% load staticfiles %}
<html>
<head>
    <meta charset="utf-8">
    <title>ShapeBootstrap Clean Template</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Bootstrap -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/bootstrap-responsive.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/style.css' %}" rel="stylesheet">

    <!--Font-->
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600' rel='stylesheet' type='text/css'>



    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="shortcut icon" href="ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png">




    <!-- SCRIPT 
    ============================================================-->
    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>

</head>
<body>

<!--HEADER ROW-->
<div id="header-row" style="background-color: #b60e10">
    <div class="container">
        <div class="row">
            <!--LOGO-->
            <div class="span3"><a class="brand" href="https://twitter.com/search?q=telkomsel&src=typd&lang=en"><img src="{% static 'img/logo-telkomsel.png' %}"/></a></div>
            <!-- /LOGO -->

            <!-- MAIN NAVIGATION -->
            <div class="span9">
                <div class="navbar pull-right" style="color:white; text-shadow: 0 0 0 #fff;">
                    <div class="navbar-inner">
                        <a data-target=".navbar-responsive-collapse" data-toggle="collapse" class="btn btn-navbar"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a>
                        <div class="nav-collapse collapse navbar-responsive-collapse">
                            <ul class="nav">
                                <li><a href="{% url 'showberanda'%}">Beranda</a></li>
                                <li><a href="{% url 'showsentimenanalisis'%}">Sentimen Analisis</a></li>
                                <li><a href="{% url 'showbantuan'%}">Bantuan</a></li>
                            </ul>
                        </div>

                    </div>
                </div>
            </div>
            <!-- MAIN NAVIGATION -->
        </div>
    </div>
</div>
<!-- /HEADER ROW -->

{#<div class="container">#}
{##}
{##}
{#    <!-- Feature#}
{#      ==============================================-->#}
{##}
{##}
{#    <div class="row feature-box">#}
{#        <div class="span12 cnt-title">#}
{#            <h1>At vero eos et accusamus et iusto odio dignissimos</h1>#}
{#            <span>Contrary to popular belief, Lorem Ipsum is not simply random text.</span>#}
{#        </div>#}
{##}
{#        <div class="span4">#}
{#            <img src="img/icon3.png">#}
{#            <h2>Feature A</h2>#}
{#            <p>#}
{#                Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.#}
{#            </p>#}
{##}
{#            <a href="#">Read More &rarr;</a>#}
{##}
{#        </div>#}
{##}
{#        <div class="span4">#}
{#            <img src="img/icon2.png">#}
{#            <h2>Feature B</h2>#}
{#            <p>#}
{#                Consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna#}
{#                aliqua.#}
{#            </p>#}
{#            <a href="#">Read More &rarr;</a>#}
{#        </div>#}
{##}
{#        <div class="span4">#}
{#            <img src="img/icon1.png">#}
{#            <h2>Feature C</h2>#}
{#            <p>#}
{#                Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante.#}
{#            </p>#}
{#            <a href="#">Read More &rarr;</a>#}
{#        </div>#}
{#    </div>#}
{##}
{##}
{#    <!-- /.Feature -->#}
{##}
{#    <div class="hr-divider"></div>#}
{##}
{#    <!-- Row View -->#}
{##}
{##}
{#    <div class="row">#}
{#        <div class="span6"><img src="img/responsive.png"></div>#}
{##}
{#        <div class="span6">#}
{#            <img class="hidden-phone" src="img/icon4.png" alt="">#}
{#            <h1>Fully Responsive</h1>#}
{#            <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.</p>#}
{#            <a href="#">Read More &rarr;</a>#}
{#        </div>#}
{#    </div>#}
{##}
{##}
{#</div>#}


<!-- /.Row View -->
<section id="page-breadcrumb">
    <div class="vertical-center sun">
        <div class="container">
            <div class="row">
                <div class="action">
                    <div class="col-sm-12 text-center">

                        <h1>Aplikasi Sentimen Analisis</h1>
                        <h3>Studi Kasus: Telkomsel</h3>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<div class="container">
    <div class="row">
        <div class="col-md-12">
            <form action="/tweets/" method="post">{% csrf_token %}
                <p style="margin-left: 40px">
                    <button onclick="ShowTableChart()" value="Klasifikasi Tweets" id="classify-btn" class="btn btn-primary btn-lg">Analisis Tweets</button>
                </p>
            </form>
        </div>
    </div>

    <div id="analysis-result">
        <ul class="nav nav-pills">
            <li class="active"><a data-toggle="pill" href="#home">Table Form</a></li>
            <li><a data-toggle="pill" href="#menu1">Chart Form</a></li>
        </ul>

        <div class="tab-content">
            <div id="home" class="tab-pane fade in active">

                <p>
                    <input type="search" id="myInput" placeholder="Search for tweets.." title="Type in a name">
                    <button onclick="myFunction()" class="btn" style="margin-bottom: 10px">Go</button>
                </p>
{#                <button onclick="myFunction()">Go</button>#}
                <table id="myTable" class="table table-bordered">
                    <tr>
                        <th style="width: 85%; text-align: center">Sentiment</th>
                        <th style="width: 15%;text-align: center">Classification</th>
                    </tr>

                    {% if obj %}
                    <script>
                        $(document).ready(function () {
                            $('#analysis-result').show();
                            $('#classify-btn').hide();
                        });
                    </script>
                    {% else %}
                    <script>
                        $(document).ready(function () {
                            $('#analysis-result').hide();
                        });
                    </script>
                    {% endif %}

                    {% for item in obj %}
                        <tr>
                            <td style="width: 85%;">{{ item.sentiment }}</td>
                            <td style="width: 15%; text-align: center;">{{ item.classification }}</td>
                        </tr>
                    {% endfor %}
                </table>

            </div>
            <div id="menu1" class="tab-pane fade">
                <h3>Pie Chart Sentimen Analisis</h3>
                <div id="piechart"></div>

                <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
            </div>
        </div>
    </div>



</div>
<!--<div id="myDIV" style="display: none">-->

<!--<div class="clearfix"></div>-->

<script>

{#    $(document).ready(function () {#}
{##}
{#        $('#analysis-result').hide();#}
{##}
{#    })#}
{##}
{#    function ShowTableChart() {#}
{#        $('#analysis-result').show();#}
{##}
        {#        var x = document.getElementById('analysis-result');#}
        {#        if (x.style.display === "none') {#}
        {#            x.style.display = 'block';#}
        {#    } else {#}
        {#        x.style.display = 'none';#}
        {#    }#}
{#    }#}
    function myFunction() {
        var input, filter, table, tr, td, td1, i, sentpos_count, sentneg_count, sentnet_count;
        sentpos_count = 0;
        sentneg_count = 0;
        sentnet_count = 0;
        input = document.getElementById("myInput");
        filter = input.value.toUpperCase();
        table = document.getElementById("myTable");
        tr = table.getElementsByTagName("tr");
        for (i = 0; i < tr.length; i++) {
            td = tr[i].getElementsByTagName("td")[0];
            td1 = tr[i].getElementsByTagName("td")[1];
            if (td) {
                if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {

                    if (td1.innerHTML === "positif") {
                        sentpos_count += 1;
                        //window.print(pos_count);
                        //document.write(pos_count);

                    } else if (td1.innerHTML === "negatif"){
                        sentneg_count += 1;
                    } else {
                        sentnet_count += 1;
                    }
                    tr[i].style.display = "";
                } else {
                    tr[i].style.display = "none";
                }
            }
        }
        // Load google charts
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart);

        // Draw the chart and set the chart values
        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['Task', 'Hours per Day'],
                ['Sentiment Positif', sentpos_count],
                ['Sentiment Negatif', sentneg_count],
                ['Sentiment Netral', sentnet_count]
            ]);

            // Optional; add a title and set the width and height of the chart
            var options = {'title':'', 'width':550, 'height':400};

            // Display the chart inside the <div> element with id="piechart"
            var chart = new google.visualization.PieChart(document.getElementById('piechart'));
            chart.draw(data, options);
        }
        //document.write(neg_count);
    }
</script>
{#<div id="piechart"></div>#}
{##}
{#<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>script#}

<script type="text/javascript">

    var table, sentpos_count, sentneg_count, sentnet_count;
    sentpos_count = 0;
    sentneg_count = 0;
    sentnet_count = 0;
    table = document.getElementById("myTable");
    tr = table.getElementsByTagName("tr");
    for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[1];
        if (td) {
            if (td.innerHTML === "positif") {
                sentpos_count += 1;
            } else if (td.innerHTML === "negatif") {
                sentneg_count += 1;
            } else {
                sentnet_count += 1;
            }
        }
    }

    // Load google charts
    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(drawChart);

    // Draw the chart and set the chart values
    function drawChart() {
        var data = google.visualization.arrayToDataTable([
            ['Sentiment', 'Total'],
            ['Sentiment Positif', sentpos_count],
            ['Sentiment Negatif', sentneg_count],
            ['Sentiment Netral', sentnet_count]
        ]);

        // Optional; add a title and set the width and height of the chart
        var options = {'title':'', 'width':550, 'height':400};

        // Display the chart inside the <div> element with id="piechart"
        var chart = new google.visualization.PieChart(document.getElementById('piechart'));
        chart.draw(data, options);
    }
</script>

<!--<div class="column">
        {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                    <p{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</p>
                {% endfor %}
            </ul>
        {% endif %}
    </div>-->
<div class="clearfix"></div>


<!--Footer
==========================-->

<footer>
    <div class="container">
        <div class="row">
            <div class="span12 text-center">Copyright &copy 2017<br>
                <small>Achmad Taufan</small>
            </div>
        </div>
    </div>
</footer>


<!--/.Footer-->

</body>
</html>